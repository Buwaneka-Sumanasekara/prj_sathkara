(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{172:function(e,t,a){e.exports=a.p+"static/media/logo.d489875c.jpg"},183:function(e,t,a){e.exports=a.p+"static/media/boc.5f02b964.jpg"},184:function(e,t,a){e.exports=a.p+"static/media/bankicon.b85b649a.jpg"},199:function(e,t,a){e.exports=a(361)},209:function(e,t,a){},361:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(30),l=a.n(o),c=a(376),i=a(385),s=a(386),u=a(16),m=a.n(u),p=a(18),d=a(33),g=a(34),h=a(36),E=a(35),f=a(37),v=a(29),_=(a(209),a(0)),b=a.n(_),y=a(8),O=a(362),L=a(100),A=a(363),S=a(379),T=a(373),I=a(52),k=a.n(I),x=(a(216),a(218),a(364),{apiKey:"AIzaSyCWfZqvMjAGIlDN6OrwqyK0kcyj1FyOaY8",authDomain:"sathkara-bb902.firebaseapp.com",databaseURL:"https://sathkara-bb902.firebaseio.com",projectId:"sathkara-bb902",storageBucket:"sathkara-bb902.appspot.com",messagingSenderId:"937169849327"});console.log("System init as #".concat(JSON.stringify(x),"#")),k.a.apps.length||k.a.initializeApp(x);var C=k.a.auth(),N=k.a.database(),j=k.a.storage();function w(e){var t={};return t.id=e.id,t.fname=e.fname,t.lname=e.lname,t.mobile=e.mobile,t.email=e.email,t.user_type=0,t}function U(e,t){N.ref("user").child(t.id).set(t,function(t){var a="",n="";t?(a="SIGNUP",n=t):(a="SIGNUP_S",n="your registerd successfully!,Please sign-in .."),e({type:"AUTH_IS_LOADING",isLoading:!1}),e({type:"AUTH_REGISTER",message:{msg_type:a,msg_txt:n}})})}function D(e,t){console.log("".concat(JSON.stringify(t.uid))),N.ref("user/".concat(t.uid)).once("value",function(t){console.log(t),e({type:"AUTH_CHECKING",isLoading:!1}),e({type:"AUTH_SUCCESS",user:t.val()})})}function H(){return function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"AUTH_CHECKING_START",isLoading:!0}),C.onAuthStateChanged(function(e){e?D(t,e):t({type:"AUTH_FAILD"})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}var G="Logout",P=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this))).componentDidMount=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.authCheck();case 2:case"end":return e.stop()}},e,this)})),a.handleItemClick=function(e,t){var n=t.name;a.setState({activeItem:n}),n===G?a.props.authLogout():"Home"===n&&a.context.router.history.push("/")},a._renderMenues=function(){a.state.activeItem;return r.a.createElement(O.a,{secondary:!0,icon:"labeled"},r.a.createElement(O.a.Item,{name:"\u0dc3\u0dad\u0dca\u0d9a\u0dcf\u0dbb",header:!0}),r.a.createElement(O.a.Item,{name:"Home",onClick:a.handleItemClick},r.a.createElement(L.a,{name:"home"}),"Home"),r.a.createElement(O.a.Menu,{position:"right"},r.a.createElement(O.a.Item,{name:G,onClick:a.handleItemClick},r.a.createElement(L.a,{name:"window close"}),"Logout")))},a.state={activeItem:""},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0===this.props.authLoading&&!1===e.authLoading&&!1===e.isAuthenticated&&this.context.router.history.push("/Auth/Login"),!0}},{key:"render",value:function(){return r.a.createElement(y.b,null,r.a.createElement(y.c,null,this.props.authLoading&&r.a.createElement(y.a,{sm:12},r.a.createElement(A.a,null,r.a.createElement("br",null),r.a.createElement(S.a,{active:!0,inverted:!0},r.a.createElement(T.a,{size:"large"},"Loading")),r.a.createElement("br",null))),!1===this.props.authLoading&&r.a.createElement(y.a,{sm:12},this._renderMenues(),this.props.children)))}}]),t}(n.Component);P.contextTypes={router:b.a.object};var R={authCheck:H,authLogout:function(){return function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"AUTH_LOGOUT_START",isLoading:!0}),C.signOut().then(function(){t({type:"AUTH_FAILD"}),t({type:"AUTH_LOGOUT_START",isLoading:!1})},function(e){console.error("Sign Out Error",e),t({type:"AUTH_LOGOUT_START",isLoading:!1})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},F=Object(v.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,authLoading:e.auth.isAuthChecking}},R)(P),M=a(365),z=a(381),V=a(375),B=a(383),K=a(115),W=a(172),J=a.n(W),q="Login",Y="Register",Z="SIGNUP_S",Q="SIGNUP",X="LOGIN_S",$="LOGIN",ee=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this))).componentDidMount=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("screen:".concat(a.props.match.params.screen)),e.next=3,a.props.authCheck();case 3:case"end":return e.stop()}},e,this)})),a.clearForm=function(e){e===Z&&a.setState({reg_fname:"",reg_lname:"",reg_mobile:"",reg_email:"",reg_pass:"",reg_cpass:""})},a.redirectToHome=function(){a.context.router.history.push("/")},a.validateReg=function(){a.setState({error_type:"",error:""});var e=!0,t="";return""===a.state.reg_fname?(e=!1,t="Please enter your first name"):""===a.state.reg_lname?(e=!1,t="Please enter your Last name"):""===a.state.reg_mobile?(e=!1,t="Please enter your mobile no"):""===a.state.reg_email?(e=!1,t="Please enter your email"):""===a.state.reg_pass?(e=!1,t="Please enter your password"):a.state.reg_pass!==a.state.reg_cpass&&(e=!1,t="passwords should be matched!"),!1===e&&a._setMessage(Q,t,3e3),e},a.handleRegister=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.validateReg()){e.next=9;break}return(t={}).fname=a.state.reg_fname,t.lname=a.state.reg_lname,t.mobile=a.state.reg_mobile,t.email=a.state.reg_email,t.pass=a.state.reg_pass,e.next=9,a.props.registerUser(t);case 9:case"end":return e.stop()}},e,this)})),a.validateLogin=function(){a.setState({error_type:"",error:""});var e=!0,t="";return""===a.state.login_email?(e=!1,t="Please enter your email"):""===a.state.login_pass&&(e=!1,t="Please enter your password"),!1===e&&a._setMessage($,t,3e3),e},a.handleLogin=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.validateLogin()){e.next=6;break}return(t={}).email=a.state.login_email,t.pass=a.state.login_pass,e.next=6,a.props.loginUser(t);case 6:case"end":return e.stop()}},e,this)})),a.onchangetext=function(e,t){"reg_fname"===e?a.setState({reg_fname:t}):"reg_lname"===e?a.setState({reg_lname:t}):"reg_mobile"===e?a.setState({reg_mobile:t}):"reg_email"===e?a.setState({reg_email:t}):"reg_pass"===e?a.setState({reg_pass:t}):"reg_cpass"===e&&a.setState({reg_cpass:t})},a.onchangetext_login=function(e,t){"login_email"===e?a.setState({login_email:t}):"login_pass"===e&&a.setState({login_pass:t})},a.changeScreen=function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({screen:t},function(){a.context.router.history.push("/Auth/".concat(t))});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.render=function(){return a.props.authLoading?r.a.createElement(y.b,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement(A.a,null,r.a.createElement("br",null),r.a.createElement(S.a,{active:!0,inverted:!0},r.a.createElement(T.a,{size:"large"},"Loading")),r.a.createElement("br",null))))):r.a.createElement(y.b,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{md:{size:6,offset:3}},r.a.createElement(y.c,null,r.a.createElement(y.a,{md:{size:4,offset:4}},r.a.createElement(M.a,{src:J.a,size:"small",wrapped:!0}))))),r.a.createElement(y.c,null,a.state.screen===q&&a.renderLogin(),a.state.screen===Y&&a.renderSignup()))},a.renderLogin=function(){var e=a.state.error_type===$&&""!==a.state.error,t=a.state.error_type===X&&""!==a.state.error;return r.a.createElement(y.a,{md:{size:4,offset:4}},r.a.createElement(z.a,{hidden:!e,error:!0,content:a.state.error}),r.a.createElement(z.a,{hidden:!t,positive:!0,content:a.state.error}),r.a.createElement(V.a,{loading:a.props.isLoading,onSubmit:function(){return a.handleLogin()}},r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",placeholder:"abc@example.com",value:a.state.login_email,onChange:function(e){return a.onchangetext_login("login_email",e.target.value)}})),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",value:a.state.login_pass,onChange:function(e){return a.onchangetext_login("login_pass",e.target.value)}})),r.a.createElement(B.a,{color:"blue"},"Login")),r.a.createElement(A.a,{vertical:!0}),r.a.createElement("br",null),r.a.createElement(B.a.Group,null,r.a.createElement(K.a,null,"If your not registerd yet "),r.a.createElement(B.a.Or,{text:"->"}),r.a.createElement(B.a,{color:"teal",onClick:function(){return a.changeScreen(Y)}},"Sign up here")))},a.renderSignup=function(){var e=a.state.error_type===Q&&""!==a.state.error,t=a.state.error_type===Z&&""!==a.state.error;return r.a.createElement(y.a,{md:{size:6,offset:3}},r.a.createElement(z.a,{hidden:!e,error:!0,content:a.state.error}),r.a.createElement(z.a,{hidden:!t,positive:!0,content:a.state.error}),r.a.createElement(V.a,{loading:a.props.isLoading,onSubmit:function(){return a.handleRegister()}},r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12,md:6},r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"First Name"),r.a.createElement("input",{placeholder:"First Name",value:a.state.reg_fname,onChange:function(e){return a.onchangetext("reg_fname",e.target.value)}})),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{placeholder:"Last Name",value:a.state.reg_lname,onChange:function(e){return a.onchangetext("reg_lname",e.target.value)}})),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Mobile No"),r.a.createElement("input",{placeholder:"+94770000000",value:a.state.reg_mobile,onChange:function(e){return a.onchangetext("reg_mobile",e.target.value)}}))),r.a.createElement(y.a,{sm:12,md:6},r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{placeholder:"abc@example.com",value:a.state.reg_email,onChange:function(e){return a.onchangetext("reg_email",e.target.value)}})),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",value:a.state.reg_pass,onChange:function(e){return a.onchangetext("reg_pass",e.target.value)}})),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{type:"password",value:a.state.reg_cpass,onChange:function(e){return a.onchangetext("reg_cpass",e.target.value)}})))),r.a.createElement("br",null),r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement(B.a,{type:"submit",positive:!0},"Register")))),r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement(A.a,{vertical:!0}),r.a.createElement("br",null),r.a.createElement(K.a,null,"If your already registered ?",r.a.createElement(B.a,{onClick:function(){return a.changeScreen(q)}}," Sign-in here")," "))))},a.state={screen:q,alertVisible:!0,error:"",error_type:"",reg_fname:"",reg_lname:"",reg_mobile:"",reg_email:"",reg_pass:"",reg_cpass:"",login_email:"",login_pass:""},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"componentWillUnmount",value:function(){this.isCancelled=!0}},{key:"shouldComponentUpdate",value:function(e,t){return!0===this.props.authLoading&&!1===e.authLoading?!1===e.isAuthenticated?void 0===this.props.match.params.screen?this.changeScreen(q):this.changeScreen(this.props.match.params.screen):this.redirectToHome():this.props.message.msg_type!==e.message.msg_type&&this._setMessage(e.message.msg_type,e.message.msg_txt,3e3),!0}},{key:"_setMessage",value:function(e,t,a){var n=this;e===X?this.redirectToHome():(this.setState({error_type:e,error:t}),void 0===a?setTimeout(function(){n.setState({error_type:"",error:""})},2e3):setTimeout(function(){n.setState({error_type:"",error:""})},a),this.clearForm(e),window.scrollTo(0,0))}}]),t}(n.Component);ee.contextTypes={router:b.a.object};var te=ee,ae={registerUser:function(e){return function(){var t=Object(p.a)(m.a.mark(function t(a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"AUTH_IS_LOADING",isLoading:!0}),a({type:"AUTH_REGISTER",message:{msg_type:"",msg_txt:""}}),C.createUserWithEmailAndPassword(e.email,e.pass).then(function(t){console.info(t.user.uid);var n=e;n.id=t.user.uid,U(a,w(n))}).catch(function(e){console.error(e),a({type:"AUTH_IS_LOADING",isLoading:!1}),a({type:"AUTH_REGISTER",message:{msg_type:"SIGNUP",msg_txt:e.message}})});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},loginUser:function(e){return function(){var t=Object(p.a)(m.a.mark(function t(a){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"AUTH_IS_LOADING",isLoading:!0}),a({type:"AUTH_LOGIN",message:{msg_type:"",msg_txt:""}}),C.signInWithEmailAndPassword(e.email,e.pass).then(function(e){console.info(e),a({type:"AUTH_IS_LOADING",isLoading:!1}),a({type:"AUTH_LOGIN",message:{msg_type:"LOGIN_S",msg_txt:"Success"}})}).catch(function(e){console.error(e),a({type:"AUTH_IS_LOADING",isLoading:!1}),a({type:"AUTH_LOGIN",message:{msg_type:"LOGIN",msg_txt:e.message}})});case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},authCheck:H},ne=Object(v.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,authLoading:e.auth.isAuthChecking,isLoading:e.auth.isLoading,message:e.auth.message}},ae)(te),re=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this))).componentDidMount=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)})),a.handleChange=function(e){a.setState({value:e.target.value})},a.clickButton=function(){a.props.multiplyValue(a.state.value)},a.render=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"TestView URL:".concat(a.props.match.url," ")),r.a.createElement("h2",null,"Redux State: ".concat(a.props.mymarks)),r.a.createElement("label",null,"Name:",r.a.createElement("input",{type:"text",value:a.state.value,onChange:a.handleChange})),r.a.createElement("button",{onClick:a.clickButton},"Add"))},a.state={value:0},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}}]),t}(n.Component);var oe=Object(v.b)(function(e){return{mymarks:e.app.value}},{})(re);var le=a(352);function ce(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+""+e()+e()+e()+e()+e()+e()}function ie(e){var t={};return t.eventid=e.eventid,t.uid=e.uid,t.amount=parseFloat(e.amt),t["donation-state"]=0,t.crdate=k.a.database.ServerValue.TIMESTAMP,void 0!==e.id&&(t.id=e.id,t.imgurl=e.imgurl),t}function se(e,t,a,n){var r=N.ref("donations/".concat(n.eventid,"/").concat(n.uid,"/").concat(t)),o=n;o.id=t,o.imgurl=a,r.set(ie(o)),e({type:"DONATION_LOADING",error:"",isLoading:!1})}var ue=a(384),me=a(382),pe=a(45),de=a.n(pe),ge=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.loadCurrentEvent();case 2:a.props.updateAppLiveInfo(),a.props.updateSelfDonations(a.props.liveEvent.id,a.props.uid);case 4:case"end":return e.stop()}},e,this)})),a.handleDonationPress=function(){a.context.router.history.push("/donations")},a.render=function(){var e=a.props.liveEvent;return r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement(A.a,{placeholder:!0},r.a.createElement(ue.a,{icon:!0},r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12,md:3},r.a.createElement(L.a,{name:"home",color:"grey"}),"".concat(e.place)),r.a.createElement(y.a,{sm:12,md:6},r.a.createElement(L.a,{name:"like",color:"red"}),"".concat(e.name)),r.a.createElement(y.a,{sm:12,md:3},r.a.createElement(L.a,{name:"calendar check outline",color:"grey"}),"".concat(e.date))),r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement("br",null),r.a.createElement(A.a,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12,md:3},r.a.createElement(me.a,{color:"red",size:"small"},r.a.createElement(me.a.Value,null,e["total-contributors"]),r.a.createElement(me.a.Label,null,"Contributors"))),r.a.createElement(y.a,{sm:12,md:3},r.a.createElement(me.a,{color:"red",size:"small"},r.a.createElement(me.a.Value,null,r.a.createElement(de.a,{value:e["total-amount"],displayType:"text",thousandSeparator:!0,prefix:"\u0dbb\u0dd4 "})),r.a.createElement(me.a.Label,null,"Target Amount"))),r.a.createElement(y.a,{sm:12,md:3},r.a.createElement(me.a,{color:"red",size:"small"},r.a.createElement(me.a.Value,null,r.a.createElement(de.a,{value:e["total-expect"],displayType:"text",thousandSeparator:!0,prefix:"\u0dbb\u0dd4 "})),r.a.createElement(me.a.Label,null,"Current Expect"))),r.a.createElement(y.a,{sm:12,md:3},r.a.createElement(me.a,{color:"red",size:"small"},r.a.createElement(me.a.Value,null,r.a.createElement(de.a,{value:e["total-recived"],displayType:"text",thousandSeparator:!0,prefix:"\u0dbb\u0dd4 "})),r.a.createElement(me.a.Label,null,"Received"))))))))))),r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12,md:4},r.a.createElement(A.a,{textAlign:"center"},r.a.createElement(me.a,{color:"orange",size:"small"},r.a.createElement(me.a.Value,null,a.props.liveinfo["users-all"]),r.a.createElement(me.a.Label,null,"Members")))),r.a.createElement(y.a,{sm:12,md:4},r.a.createElement(A.a,{textAlign:"center"},r.a.createElement(B.a,{as:"div",labelPosition:"right",onClick:function(){return a.handleDonationPress()}},r.a.createElement(B.a,{color:"red"},r.a.createElement(L.a,{name:"heart"}),"Donate"),r.a.createElement(K.a,{as:"a",basic:!0,color:"red",pointing:"left"},"US")))),r.a.createElement(y.a,{sm:12,md:4},r.a.createElement(A.a,{textAlign:"center"},r.a.createElement(me.a,{color:"olive",size:"small"},r.a.createElement(me.a.Value,null,r.a.createElement(de.a,{value:a.props.currentdonation,displayType:"text",thousandSeparator:!0,prefix:"\u0dbb\u0dd4 "})),r.a.createElement(me.a.Label,null,"Your Donations")))))))},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}}]),t}(n.Component);ge.contextTypes={router:b.a.object};var he=ge,Ee={loadCurrentEvent:function(){return function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.ref("events").orderByChild("active").equalTo(!0).on("value",function(e){e.forEach(function(e){t({type:"EVENT_SET",liveEvent:e.val()})})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},updateAppLiveInfo:function(){return function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.ref("app-live-info").on("value",function(e){t({type:"UPDATE_LIVE_INFO",liveinfo:e.val()})});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},updateSelfDonations:function(e,t){return function(){var a=Object(p.a)(m.a.mark(function a(n){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:N.ref("donations/".concat(e,"/").concat(t)).on("value",function(e){var t=0,a=le.toArray(e.val());console.log(a);var r=!0,o=!1,l=void 0;try{for(var c,i=a[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var s=c.value;2!==s["donation-state"]&&(t+=s.amount)}}catch(u){o=!0,l=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw l}}n({type:"DONATION_UPDATE_USER_TOTAL",currentdonation:t})});case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},fe=Object(v.b)(function(e){return{uid:e.auth.user.id,liveEvent:e.event.liveEvent,liveinfo:e.app.liveinfo,currentdonation:e.donation.currentdonation}},Ee)(he),ve=a(380),_e=a(378),be=a(377),ye=a(374),Oe=a(183),Le=a.n(Oe),Ae=a(184),Se=a.n(Ae),Te="CREATE_S",Ie="CREATE",ke=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(E.a)(t).call(this))).componentDidMount=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.updateSelfDonationsList(a.props.liveEvent.id,a.props.uid);case 1:case"end":return e.stop()}},e,this)})),a.clearForm=function(){a.setState({donation_save_file:null,donation_save_amount:0})},a.makeDonation=function(){if(a.state.donation_save_amount>0)if(null!==a.state.donation_save_file){var e={};e.eventid=a.props.liveEvent.id,e.uid=a.props.uid,e.amt=a.state.donation_save_amount,e.img=a.state.donation_save_file,console.log(a.state.donation_save_file),a.props.saveDonation(e)}else a._setMessage(Ie,"Please Upload your Bank slip / Payment Recipt",3e3);else a._setMessage(Ie,"Please Enter your Amount",3e3)},a.handleselectedFile=function(e){console.log(e.target.files[0]),a.setState({donation_save_file:e.target.files[0]})},a.render=function(){var e=[{menuItem:"Make Donation",render:function(){return a.renderDonation()}},{menuItem:"History",render:function(){return a.renderPendingDonation()}}];return r.a.createElement(y.b,null,r.a.createElement(ve.a,{menu:{pointing:!0},panes:e}))},a.renderPendingDonation=function(){return r.a.createElement(ve.a.Pane,{attached:!1},r.a.createElement(_e.a,{celled:!0},r.a.createElement(_e.a.Header,null,r.a.createElement(_e.a.Row,null,r.a.createElement(_e.a.HeaderCell,null,"Date"),r.a.createElement(_e.a.HeaderCell,null,"Payment"),r.a.createElement(_e.a.HeaderCell,null,"Statues"))),r.a.createElement(_e.a.Body,null,0===a.props.currentdonations.length&&r.a.createElement(y.c,null,r.a.createElement(y.a,{md:{size:8,offset:2}},r.a.createElement("br",null),r.a.createElement(ue.a,{as:"h2"},r.a.createElement(L.a.Group,{size:"large"},r.a.createElement(L.a,{name:"meh outline"})),"No Payment Records Found!"),r.a.createElement("br",null))),a.props.currentdonations.map(function(e,t){var a=new Date(e.crdate);return r.a.createElement(_e.a.Row,{key:"his".concat(t)},r.a.createElement(_e.a.Cell,null,a.toLocaleString()),r.a.createElement(_e.a.Cell,null,r.a.createElement(de.a,{value:e.amount,displayType:"text",thousandSeparator:!0,prefix:"\u0dbb\u0dd4 "})),0===e["donation-state"]&&r.a.createElement(_e.a.Cell,{warning:!0},r.a.createElement(L.a,{name:"warning sign"}),"Not Verified"),1===e["donation-state"]&&r.a.createElement(_e.a.Cell,{positive:!0},r.a.createElement(L.a,{name:"checkmark"}),"Approved"),2===e["donation-state"]&&r.a.createElement(_e.a.Cell,{negative:!0},r.a.createElement(L.a,{name:"close"}),"Cancelled"))}))))},a.renderDonation=function(){var e=a.state.error_type===Ie&&""!==a.state.error,t=a.state.error_type===Te&&""!==a.state.error;return console.log(t),r.a.createElement(ve.a.Pane,{attached:!1},r.a.createElement(z.a,{hidden:!e,error:!0,content:r.a.createElement("div",null,r.a.createElement(L.a,{name:"close",size:"large"}),a.state.error)}),r.a.createElement(z.a,{success:!0,hidden:!t,content:r.a.createElement("div",null,r.a.createElement(L.a,{name:"thumbs up outline",size:"large"}),"Thank you for your contribution.We`ll let you know once your payment verifed")}),r.a.createElement(V.a,{loading:a.props.isLoading_save,onSubmit:function(){return a.makeDonation()}},r.a.createElement(z.a,{icon:"bullhorn",header:"\u0d94\u0db6\u0d9c\u0dda \u0d85\u0dc0\u0daf\u0dcf\u0db1\u0dba\u0da7",content:r.a.createElement(y.c,null,r.a.createElement(y.a,{sm:12},r.a.createElement("p",null,"\u0d94\u0db6\u0d9c\u0dda \u0dc3\u0dd2\u0dba\u0dbd\u0dd4 \u0d86\u0db0\u0dcf\u0dbb \u0db8\u0dd4\u0daf\u0dbd\u0dca \u0db4\u0dc4\u0dad \u0dc3\u0daf\u0dc4\u0db1\u0dca \u0d85\u0db4\u0d9c\u0dda \u0db6\u0dd0\u0d82\u0d9a\u0dd4 \u0d9c\u0dd2\u0dab\u0dd4\u0db8 \u0dc0\u0dd9\u0dad \u0dba\u0ddc\u0db8\u0dd4 \u0d9a\u0ddc\u0da7 \u0d91\u0db8 \u0dbb\u0dd2\u0dc3\u0dd2\u0da7\u0dca \u0db4\u0dad / \u0db6\u0dd0\u0dbb\u0db4\u0dad\u0dd9\u0dc4\u0dd2 \u0db4\u0dd2\u0da7\u0db4\u0dad\u0d9a\u0dca \u0db8\u0dd9\u0dc4\u0dd2 \u0d9a\u0dbb\u0db1 \u0db8\u0dd9\u0db1\u0dca \u0d9a\u0dcf\u0dbb\u0dd4\u0db1\u0dd2\u0d9a\u0dc0 \u0d89\u0dbd\u0dca\u0dbd\u0dcf \u0dc3\u0dd2\u0da7\u0dd2\u0db8\u0dd4.")),r.a.createElement(y.a,{sm:12},r.a.createElement(be.a,{horizontal:!0,size:"huge"},r.a.createElement(be.a.Item,null,r.a.createElement(M.a,{avatar:!0,src:Le.a}),r.a.createElement(be.a.Content,null,r.a.createElement(be.a.Header,null,"\u0dbd\u0d82\u0d9a\u0dcf \u0db6\u0dd0\u0d82\u0d9a\u0dd4\u0dc0 - \u0db6\u0db8\u0dca\u0db6\u0dbd\u0db4\u0dd2\u0da7\u0dd2\u0dba"),r.a.createElement(be.a.Header,null,"BOC - Bambalapitiya"))),r.a.createElement(be.a.Item,null,r.a.createElement(M.a,{avatar:!0,src:Se.a}),r.a.createElement(be.a.Content,null,"Account No",r.a.createElement(be.a.Header,null,"0081625372"))))))}),r.a.createElement(V.a.Input,{label:"Payment Reciept",type:"file",accept:"image/png, image/jpeg , application/pdf",onChange:a.handleselectedFile}),r.a.createElement(V.a.Field,null,r.a.createElement("label",null,"Amount"),r.a.createElement(de.a,{thousandSeparator:!0,prefix:"\u0dbb\u0dd4 ",value:a.state.donation_save_amount,onValueChange:function(e){e.formattedValue;var t=e.value;a.setState({donation_save_amount:t})}})),r.a.createElement(ye.a,{hidden:!0}),r.a.createElement(V.a.Button,{primary:!0},"Submit")))},a.state={error:"",error_type:"",donation_save_file:null,donation_save_amount:0},a}return Object(f.a)(t,e),Object(g.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0===this.props.isLoading_save&&!1===e.isLoading_save&&(""!==e.saveError?this._setMessage(Ie,e.saveError,4e3):this._setMessage(Te,"Success",4e3)),!0}},{key:"_setMessage",value:function(e,t,a){var n=this;this.setState({error_type:e,error:t}),void 0===a?setTimeout(function(){n.setState({error_type:"",error:""})},2e3):setTimeout(function(){n.setState({error_type:"",error:""})},a),e===Te&&this.clearForm(e),window.scrollTo(0,0)}}]),t}(n.Component),xe={saveDonation:function(e){return function(){var t=Object(p.a)(m.a.mark(function t(a){var n,r,o,l,c,i,s,u,p,d;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{a({type:"DONATION_LOADING",error:"",isLoading:!0}),n=N.ref("donations/".concat(e.eventid,"/").concat(e.uid)),r=n.push(ie(e)),o=r.key,null!==e.img?(l=ce(),c=e.img,i=e.img.name,s=e.img.type,u={contentType:s},console.log("File name:".concat(l,".").concat(s)),p=j.ref(),(d=p.child("donations/".concat(l,".").concat(i.split(".")[1])).put(c,u)).on(k.a.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case k.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case k.a.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){switch(e.code){case"storage/unauthorized":a({type:"DONATION_LOADING",error:"Storage Unothorized",isLoading:!1});break;case"storage/canceled":a({type:"DONATION_LOADING",error:"Storage Cancel",isLoading:!1});break;case"storage/unknown":a({type:"DONATION_LOADING",error:"Unkonwn",isLoading:!1})}},function(){d.snapshot.ref.getDownloadURL().then(function(t){console.log("File available at",t),se(a,o,t,e)})})):se(a,o,"",e)}catch(m){a({type:"DONATION_LOADING",error:m.message,isLoading:!1})}case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},updateSelfDonationsList:function(e,t){return function(){var a=Object(p.a)(m.a.mark(function a(n){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:N.ref("donations/".concat(e,"/").concat(t)).on("value",function(e){var t=le.toArray(e.val());n({type:"DONATION_UPDATE_USER_DON",currentdonations:t})});case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},Ce=Object(v.b)(function(e){return{uid:e.auth.user.id,isLoading_save:e.donation.isLoading,saveError:e.donation.saveError,liveEvent:e.event.liveEvent,currentdonations:e.donation.currentdonations}},xe)(ke),Ne=function(){return r.a.createElement(c.a,null,r.a.createElement(i.a,null,r.a.createElement(s.a,{exact:!0,path:"/Auth",component:ne}),r.a.createElement(s.a,{exact:!0,path:"/Auth/:screen",component:ne}),r.a.createElement(F,null,r.a.createElement(i.a,null,r.a.createElement(s.a,{exact:!0,path:"/",component:fe}),r.a.createElement(s.a,{exact:!0,path:"/donations",component:Ce}),r.a.createElement(s.a,{path:"/:page",component:oe})))))},je=a(123),we=a(43),Ue=a(187),De=a(188),He=a(22),Ge={isLoading:!1,isAuthenticated:!1,isAuthChecking:!1,user:{},message:{msg_type:"",msg_txt:""}};var Pe={isLoading:!1,liveinfo:{}};var Re={isLoading:!1,liveEvent:{}};var Fe={isLoading:!1,saveError:"",currentdonation:0,currentdonations:[]};var Me=Object(we.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_IS_LOADING":return Object(He.a)({},e,{isLoading:t.isLoading});case"AUTH_REGISTER":case"AUTH_LOGIN":return Object(He.a)({},e,{message:t.message});case"AUTH_CHECKING_START":return Object(He.a)({},e,{isAuthenticated:!1,isAuthChecking:t.isLoading,isLoading:!1});case"AUTH_CHECKING":return Object(He.a)({},e,{isAuthChecking:t.isLoading,isLoading:!1});case"AUTH_SUCCESS":return Object(He.a)({},e,{isAuthenticated:!0,user:t.user,isLoading:!1});case"AUTH_LOGOUT_START":return Object(He.a)({},e,{isAuthChecking:t.isLoading});case"AUTH_FAILD":return Object(He.a)({},e,{isAuthenticated:!1,user:{},isLoading:!1,isAuthChecking:!1});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IS_LOADING":return Object(He.a)({},e,{isLoading:t.isLoading});case"UPDATE_LIVE_INFO":return Object(He.a)({},e,{liveinfo:t.liveinfo});default:return e}},event:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EVENT_LOADING":return Object(He.a)({},e,{isLoading:t.isLoading});case"EVENT_SET":return Object(He.a)({},e,{liveEvent:t.liveEvent});default:return e}},donation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DONATION_LOADING":return Object(He.a)({},e,{isLoading:t.isLoading,saveError:t.error});case"DONATION_UPDATE_USER_TOTAL":return Object(He.a)({},e,{currentdonation:t.currentdonation});case"DONATION_UPDATE_USER_DON":return Object(He.a)({},e,{currentdonations:t.currentdonations});default:return e}}});a(356),a(358);var ze=function(e){var t=Object(De.createLogger)({predicate:function(e,t){return!0}}),a=[Ue.a];return a=Object(je.a)(a).concat([t]),Object(we.e)(Me,e,Object(we.d)(we.a.apply(void 0,Object(je.a)(a))))}();l.a.render(r.a.createElement(v.a,{store:ze},r.a.createElement(Ne,null)),document.getElementById("root"))}},[[199,2,1]]]);
//# sourceMappingURL=main.4afe4ab0.chunk.js.map